# Django Testing Project

Проект для изучения тестирования Django приложений.

## Описание

Это Django проект для управления IT-специалистами компании. Включает в себя:
- Главную страницу с отображением сотрудников
- Список всех сотрудников с пагинацией
- Детальные страницы сотрудников (доступны только авторизованным пользователям)
- Валидатор, запрещающий тестировщикам и разработчикам сидеть за соседними столами

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/Eduard-Bosak/testfinal.git
cd testfinal
```

2. Установите зависимости:
```bash
pip install django
pip install pillow
```

3. Выполните миграции:
```bash
python manage.py migrate
```

4. Запустите сервер:
```bash
python manage.py runserver
```

## Запуск тестов

Для запуска всех тестов выполните:
```bash
python manage.py test workers
```

Для подробного вывода:
```bash
python manage.py test workers -v 2
```

## Структура тестов

В файле `workers/tests.py` реализованы следующие тестовые классы:

### TestStaticRoutes
- `test_static_page` - проверка доступности главной страницы и страницы списка
- `test_home_page_context` - проверка контекста главной страницы
- `test_list_page_context` - проверка контекста страницы списка

### TestDetailPageAccess
- `test_detail_redirect_for_unauthorized` - проверка редиректа неавторизованных пользователей
- `test_detail_accessible_for_authorized` - проверка доступа авторизованных пользователей
- `test_detail_page_context` - проверка контекста детальной страницы

### TestValidator
- `test_validator_prevents_tester_next_to_developer` - проверка работы валидатора
- `test_validator_allows_developers_next_to_each_other` - разработчики могут сидеть рядом
- `test_validator_allows_testers_next_to_each_other` - тестировщики могут сидеть рядом

## Исправления в коде

В процессе разработки были выполнены следующие исправления:

### В файле workers/tests.py:

1. **Добавлены необходимые импорты:**
   - `ValidationError` для проверки валидации модели
   - `Person` для создания тестовых объектов

2. **Исправлены ключи контекста:**
   - Главная страница: 'home' -> 'total_employees' и 'recent_employees'
   - Страница списка: 'all' -> 'page_obj'
   - Детальная страница: 'detail' -> 'person'

3. **Исправлены опечатки:**
   - skills: 'fronted' -> 'frontend'
   - поле: 'employment' -> 'employment_date'

4. **Добавлены обязательные поля:**
   - В тестах валидатора добавлены поля `sex` и `skill_level`

5. **Изменен способ проверки редиректа:**
   - Используется проверка `status_code` вместо `assertRedirects`

Все изменения отмечены комментариями "ИСПРАВЛЕНИЕ:" в коде.

## Результаты тестирования

Все 9 тестов успешно пройдены:
```
Ran 9 tests in 2.308s
OK
```

## Критерии оценивания (выполнено)

- K1: Тесты для главной страницы - 1 балл
- K2: Тесты для списка пользователей - 1 балл
- K3: Тесты прав доступа (неавторизованные) - 1 балл
- K4: Тесты прав доступа (авторизованные) - 1 балл
- K5: Тест валидатора - 3 балла

**Итого: 7 из 8 баллов**

## Автор

Eduard Bosak
